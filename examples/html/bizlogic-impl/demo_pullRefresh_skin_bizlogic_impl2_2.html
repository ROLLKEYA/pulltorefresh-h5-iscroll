<!-- 
        作者：dailc
        时间：2017-04-05
        描述：  这个是结合业务的下拉刷新示例
    	第2种业务实现,这个是实际接口的实现
-->
<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		
		<title>下拉刷新皮肤 bizlogic-impl2</title>
		<link rel="stylesheet" href="../../css/mui.min.css" />
		<link rel="stylesheet" href="../../css/common.css" />
		<link rel="stylesheet" href="../../css/common_search.css" />
		

	</head>

	<body>
		<div id="pullrefresh" class="mui-scroll-wrapper mui-content pt0">	
			<div class="mui-scroll">	
				<ul class="mui-table-view" id="listdata" data-tpl="#list_item" initPageIndex= "0" pageSize = "10" >
	
				</ul>
		    </div>
		</div>			
		
		<!-- 列表每一个item需要用到的模板 -->
        <script type="text/template" id="list_item">
           <li class="mui-table-view-cell" id="{{InfoID}}">
             <p class="cell-title">
                {{Title}}
             </p>
             <p class="cell-content">
                <span class="cell-content-subcontent">
                </span>
                <span class="cell-content-time">
                    {{InfoDate}}
                </span>
             </p>
         </li>
        </script>
	</body>
	<script type="text/javascript" src="../../js/mui.js" ></script>
	<script type="text/javascript" src="../../js/mustache.min.js" ></script>
	<script type="text/javascript" src="../../../dist/pulltorefresh.iscroll.probe.js" ></script>
	<script type="text/javascript" src="../../../dist/pulltorefresh.skin.default.js"></script>
	<script type="text/javascript" src="../../../dist/pulltorefresh.bizlogic.impl2.js" ></script>
	<script>
		
		window.onload = function() {
		     PullToRefreshTools.bizlogic.initPullDownRefresh({
		        skin: PullToRefreshTools.skin.defaults,
		        url: 'http://115.29.151.25:8012/request.php',
		        requestData: function(currPage, callback) {
                    var result =  {
                        action: 'testPullrefreshListDemoV3',
                        paras: {
                            currentpageindex: currPage.toString(),
                            pagesize: 10,
                            tabType: 'tab1',
                            // 搜索值,接口里没有实现,这里可以打印代表搜索值已经获取到
                            searchValue: ''
                        }                       
                    };
                    return result;
		        },
		        itemClick: function(e) {
		            console.log("点击:"+this.id);
		        }
		     });
		};
		
	</script>
	
</html>